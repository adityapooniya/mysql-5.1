#
# Check reset_seconds_behind_master, Relay_log_io_connected
#
stop slave;
drop table if exists t1,t2,t3,t4,t5,t6,t7,t8,t9;
reset master;
reset slave;
drop table if exists t1,t2,t3,t4,t5,t6,t7,t8,t9;
start slave;
drop table if exists t1;
Should be ON
show global variables like "reset_seconds_behind_master";
Variable_name	Value
reset_seconds_behind_master	ON
set global reset_seconds_behind_master=0;
Should be OFF
show global variables like "reset_seconds_behind_master";
Variable_name	Value
reset_seconds_behind_master	OFF
set global reset_seconds_behind_master=1;
Should be ON
show global variables like "reset_seconds_behind_master";
Variable_name	Value
reset_seconds_behind_master	ON
CREATE TABLE t1 (id INT, v int);
Should be 1
show global status like "Relay_log_io_connected";
Variable_name	Value
Relay_log_io_connected	1
seconds_behind_master with reset should be 0 and is 0
set global reset_seconds_behind_master=0;
Should be OFF
show global variables like "reset_seconds_behind_master";
Variable_name	Value
reset_seconds_behind_master	OFF
insert into t1 values (1,0), (2,0);
seconds_behind_master without reset should be >0 
result
1
set global reset_seconds_behind_master=1;
Should be ON
show global variables like "reset_seconds_behind_master";
Variable_name	Value
reset_seconds_behind_master	ON
insert into t1 values (3,0);
seconds_behind_master with reset should be 0 and is 0
stop slave;
start slave;
Should be 2
show global status like "Relay_log_io_connected";
Variable_name	Value
Relay_log_io_connected	2
#
# Cleanup
#
DROP TABLE t1;
set global reset_seconds_behind_master=1;
