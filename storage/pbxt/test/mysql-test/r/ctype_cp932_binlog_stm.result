drop table if exists t1;
set names cp932;
set character_set_database = cp932;
RESET MASTER;
CREATE TABLE t1(f1 blob);
PREPARE stmt1 FROM 'INSERT INTO t1 VALUES(?)';
SET @var1= x'8300';
EXECUTE stmt1 USING @var1;
SHOW BINLOG EVENTS FROM 106;
Log_name	Pos	Event_type	Server_id	End_log_pos	Info
master-bin.000001	#	Query	1	#	use `test`; CREATE TABLE t1(f1 blob)
master-bin.000001	#	Query	1	#	BEGIN
master-bin.000001	#	Table_map	1	#	table_id: # (test.t1)
master-bin.000001	#	Write_rows	1	#	table_id: # flags: STMT_END_F
master-bin.000001	#	Xid	1	#	COMMIT /* xid=14 */
SELECT HEX(f1) FROM t1;
HEX(f1)
8300
DROP table t1;
CREATE TABLE t4 (s1 CHAR(50) CHARACTER SET latin1,
s2 CHAR(50) CHARACTER SET cp932,
d DECIMAL(10,2))|
CREATE PROCEDURE bug18293 (IN ins1 CHAR(50),
IN ins2 CHAR(50) CHARACTER SET cp932,
IN ind DECIMAL(10,2))
BEGIN
INSERT INTO t4 VALUES (ins1, ins2, ind);
END|
CALL bug18293("Foo's a Bar", _cp932 0xED40ED41ED42, 47.93)|
SELECT HEX(s1),HEX(s2),d FROM t4|
HEX(s1)	HEX(s2)	d
466F6F2773206120426172	ED40ED41ED42	47.93
DROP PROCEDURE bug18293|
DROP TABLE t4|
SHOW BINLOG EVENTS FROM 106|
Log_name	Pos	Event_type	Server_id	End_log_pos	Info
master-bin.000001	106	Query	1	196	use `test`; CREATE TABLE t1(f1 blob)
master-bin.000001	196	Query	1	267	BEGIN
master-bin.000001	267	Table_map	1	309	table_id: 16 (test.t1)
master-bin.000001	309	Write_rows	1	343	table_id: 16 flags: STMT_END_F
master-bin.000001	343	Xid	1	370	COMMIT /* xid=14 */
master-bin.000001	370	Query	1	449	use `test`; DROP table t1
master-bin.000001	449	Query	1	615	use `test`; CREATE TABLE t4 (s1 CHAR(50) CHARACTER SET latin1,
s2 CHAR(50) CHARACTER SET cp932,
d DECIMAL(10,2))
master-bin.000001	615	Query	1	864	use `test`; CREATE DEFINER=`root`@`localhost` PROCEDURE `bug18293`(IN ins1 CHAR(50),
IN ins2 CHAR(50) CHARACTER SET cp932,
IN ind DECIMAL(10,2))
BEGIN
INSERT INTO t4 VALUES (ins1, ins2, ind);
END
master-bin.000001	864	Query	1	932	BEGIN
master-bin.000001	932	Table_map	1	981	table_id: 18 (test.t4)
master-bin.000001	981	Write_rows	1	1035	table_id: 18 flags: STMT_END_F
master-bin.000001	1035	Xid	1	1062	COMMIT /* xid=21 */
master-bin.000001	1062	Query	1	1151	use `test`; DROP PROCEDURE bug18293
master-bin.000001	1151	Query	1	1230	use `test`; DROP TABLE t4
