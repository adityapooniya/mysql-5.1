--disable_warnings
source include/master-slave.inc;
source include/have_binlog_format_mixed_or_row.inc;
--enable_warnings
--disable_abort_on_error
connection master;

use test;

--disable_warnings
drop table if exists tb6_eng1;
--enable_warnings

create table tb6_eng1 ( f1 int, f2 char (15), f3 decimal (5,3), f4 datetime, index (f1) );

let $run=1;
let $count=1;

delete from tb6_eng1;
insert into tb6_eng1 values ( 1, 'abc', 0.1, now() );

update tb6_eng1 set f2 = 'def' where f1 = 1;
real_sleep 1;
delete from tb6_eng1;
insert into tb6_eng1 values ( 1, 'abc', 0.1, now() );

real_sleep 1;
connection slave;
let $slave_status=query_get_value( "show slave status", Last_SQL_Error, 1 );
--echo # Last SQL Error: $slave_status

# Clean up the databases, or we have trouble later:
connection slave;
drop table tb6_eng1;

connection master;
drop table tb6_eng1;
